### Идейная реализация решения

Общая логика работы системы:

1. Клиент отправляет запрос на корпоративную почту.
2. Почтовый сервис передаёт письмо в Backend.
3. Backend направляет данные в ML-модуль.
4. ML-модуль обрабатывает письмо и возвращает результат.
5. Backend формирует итоговую структуру ответа.
6. Результат передаётся во Frontend.
7. Оператор поддержки работает с данными через веб-интерфейс.

Пользователем системы является оператор технической поддержки, работающий через веб-приложение.

---

### Пользовательский путь

Оператор взаимодействует с системой через веб-интерфейс.

На главной странице отображается таблица запросов со следующими возможностями:

* сортировка (по умолчанию — по дате получения запроса);
* фильтрация по статусам;
* просмотр обработанных агентом запросов и созданных тикетов;
* скачивание данных в формате CSV или XLSX.

В таблице отображаются:

* запросы, обработанные агентом;
* запросы, по которым созданы тикеты специалистам.

В системе предусмотрено разграничение доступа:

* **Аккаунт администратора** — отображается вся таблица запросов.
* **Аккаунт оператора** — отображаются только тикеты, закреплённые за данным оператором.

---

### Схема обработки запроса

```
┌─────────────────────────────────────────────┐
│                   Письмо                    │
└──────────────────────┬──────────────────────┘
                       ▼
┌─────────────────────────────────────────────┐
│                   Backend                   │
└──────────────────────┬──────────────────────┘
                       ▼
┌─────────────────────────────────────────────┐
│                  ML-модуль                  │
│  (обработка письма и формирование ответа)   │
└──────────────────────┬──────────────────────┘
                       ▼
┌─────────────────────────────────────────────┐
│                   Backend                   │
│  (формирование итогового ответа для         │
│   пользователя)                             │
└──────────────────────┬──────────────────────┘
                       ▼
┌─────────────────────────────────────────────┐
│                   Frontend                  │
│      (отображение результата в таблице)     │
└─────────────────────────────────────────────┘
```

---

### Архитектура системы

#### Получение почты

Backend с заданной периодичностью (например, каждые 30 секунд) проверяет почтовый ящик на наличие новых писем.

При обнаружении нового письма:

* письмо сохраняется в базе данных PostgreSQL;
* ему присваивается статус `NEW`;
* инициируется процесс обработки.

---

#### Работа AI-агента

Обработка запроса осуществляется через LLM-модель с использованием:

* embeddings;
* RAG-подхода;
* базы знаний.

Система использует внутреннюю базу знаний, содержащую эталонные ответы и ранее обработанные кейсы.

На основе анализа:

* классифицируется тип запроса;
* определяется уровень сложности;
* присваивается рейтинг сложности;
* принимается решение: автообработка или создание тикета специалисту.

---

#### Логика принятия решения

В зависимости от присвоенного рейтинга сложности:

* при низкой сложности формируется автоматический ответ;
* при высокой сложности создаётся тикет для специалиста.

Решение фиксируется в базе данных.

---

#### Отправка ответа

Отправка ответа клиенту осуществляется через Backend.

Результаты обработки:

* сохраняются в PostgreSQL;
* отображаются во Frontend в виде обновлённой таблицы.

---

### Анализ рисков

#### Риск 1. Недостаточная база знаний

При ограниченной базе знаний AI-агент может формировать некорректные или неполные ответы.

Способы минимизации:

* постепенное расширение базы знаний на основе успешно обработанных кейсов;
* ограниченный круг лиц, имеющих право дополнять базу знаний;
* контроль качества добавляемых данных.

Дополнительный риск связан с возможностью некорректного переобучения модели.
Минимизируется за счёт ограничения доступа к обновлению базы знаний и контроля со стороны ответственных специалистов.

---

#### Риск 2. Ограниченное время хакатона

Существенным риском является нехватка времени на реализацию полного функционала.

Способ минимизации:

* предварительная подготовка архитектурного каркаса;
* реализация базового Backend и Frontend до начала хакатона;
* фокус во время мероприятия на интеграции ML-модуля и бизнес-логике, а не на инфраструктурных задачах.

---
